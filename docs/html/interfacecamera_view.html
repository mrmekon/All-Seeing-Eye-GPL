<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>All-Seeing Eye: cameraView Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">All-Seeing Eye&#160;<span id="projectnumber">1.0</span></div>
   <div id="projectbrief">Customer loyalty card scanner for iPad</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('interfacecamera_view.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">cameraView Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="cameraView" -->
<p>Cropped view of rear camera video stream.  
 <a href="interfacecamera_view.html#details">More...</a></p>

<p><a href="classcamera_view-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfacecamera_view.html#a2c60d41fcd0dc0a17172a1e081a1b47f">initWithFrame:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize view with a rectangle.  <a href="#a2c60d41fcd0dc0a17172a1e081a1b47f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfacecamera_view.html#ae7f3e7153b93817e90d22f0a872a28d1">initCapture</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start video capture for this view.  <a href="#ae7f3e7153b93817e90d22f0a872a28d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(CGImageRef)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfacecamera_view.html#a98f6390a43d2e68f9bc68a80a1619754">cropImage:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Crop a video frame.  <a href="#a98f6390a43d2e68f9bc68a80a1619754"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(UIImage *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfacecamera_view.html#a1599e6698d617f02c46fe5ac78cc438d">addFrameOverlay:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a 'target' overlay to image frame.  <a href="#a1599e6698d617f02c46fe5ac78cc438d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfacecamera_view.html#ad02b926ab689e21915abf8cf1a9800cf">captureOutput:didOutputSampleBuffer:fromConnection:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Delegate to receive, display, and scan incoming video frames.  <a href="#ad02b926ab689e21915abf8cf1a9800cf"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">UIImageView *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacecamera_view.html#a636153a51fbba10a8c14fb52b1f184a6">imageView</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">AVCaptureSession *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacecamera_view.html#a6325249b12975d12ea28b956b46fae62">captureSession</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Cropped view of rear camera video stream. </p>
<p>This UIView subclass presents a rectangular, live video view from the default camera. The frames captured from the camera are set as the background image of the view.</p>
<p>This class also implements the delegate of a video capture device, and the method that receieves each video frame passes them off to the</p>
<p>Each frame is cropped to (SCREEN_WIDTH)x(SCREEN_HEIGHT/4), but note that it will happily display outside of its bounds box, so this class should be initialized with the correct size region given to initWithFrame:. </p>

<p>Definition at line <a class="el" href="camera_view_8h_source.html#l00023">23</a> of file <a class="el" href="camera_view_8h_source.html">cameraView.h</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a1599e6698d617f02c46fe5ac78cc438d"></a><!-- doxytag: member="cameraView::addFrameOverlay:" ref="a1599e6698d617f02c46fe5ac78cc438d" args="(UIImage *baseImg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (UIImage *) addFrameOverlay: </td>
          <td></td>
          <td class="paramtype">(UIImage*)&#160;</td>
          <td class="paramname"><em>baseImg</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a 'target' overlay to image frame. </p>
<p>Given a cropped video frame, overlays a translucent 'target' image over it to give the viewer an indication of where the barcode should be.</p>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000001">Bug:</a></b></dt><dd>Overlayed image is fixed size, so this only works on iPad. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">baseImg</td><td>Cropped image to add overlay to </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>New image with overlay </dd></dl>

<p>Definition at line <a class="el" href="camera_view_8m_source.html#l00153">153</a> of file <a class="el" href="camera_view_8m_source.html">cameraView.m</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interfacecamera_view_a1599e6698d617f02c46fe5ac78cc438d_icgraph.png" border="0" usemap="#interfacecamera_view_a1599e6698d617f02c46fe5ac78cc438d_icgraph" alt=""/></div>
<map name="interfacecamera_view_a1599e6698d617f02c46fe5ac78cc438d_icgraph" id="interfacecamera_view_a1599e6698d617f02c46fe5ac78cc438d_icgraph">
<area shape="rect" id="node3" href="interfacecamera_view.html#ad02b926ab689e21915abf8cf1a9800cf" title="Delegate to receive, display, and scan incoming video frames." alt="" coords="387,5,1075,38"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad02b926ab689e21915abf8cf1a9800cf"></a><!-- doxytag: member="cameraView::captureOutput:didOutputSampleBuffer:fromConnection:" ref="ad02b926ab689e21915abf8cf1a9800cf" args="(AVCaptureOutput *captureOutput,[didOutputSampleBuffer] CMSampleBufferRef sampleBuffer,[fromConnection] AVCaptureConnection *connection)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) captureOutput: </td>
          <td></td>
          <td class="paramtype">(AVCaptureOutput *)&#160;</td>
          <td class="paramname"><em>captureOutput</em></td>
        </tr>
        <tr>
          <td class="paramkey">didOutputSampleBuffer:</td>
          <td></td>
          <td class="paramtype">(CMSampleBufferRef)&#160;</td>
          <td class="paramname"><em>sampleBuffer</em></td>
        </tr>
        <tr>
          <td class="paramkey">fromConnection:</td>
          <td></td>
          <td class="paramtype">(AVCaptureConnection *)&#160;</td>
          <td class="paramname"><em>connection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delegate to receive, display, and scan incoming video frames. </p>
<p>Called whenever the camera has a new frame captured, this method crops, overlays, rotates, and resizes the frame before displaying it. It also passes the frame to the global barcode scanner to check if any barcodes are readable.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">captureOutput</td><td>Output device that generated the frame </td></tr>
    <tr><td class="paramname">sampleBuffer</td><td>Raw data returned from the camera </td></tr>
    <tr><td class="paramname">connection</td><td>Unused. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="camera_view_8m_source.html#l00181">181</a> of file <a class="el" href="camera_view_8m_source.html">cameraView.m</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interfacecamera_view_ad02b926ab689e21915abf8cf1a9800cf_cgraph.png" border="0" usemap="#interfacecamera_view_ad02b926ab689e21915abf8cf1a9800cf_cgraph" alt=""/></div>
<map name="interfacecamera_view_ad02b926ab689e21915abf8cf1a9800cf_cgraph" id="interfacecamera_view_ad02b926ab689e21915abf8cf1a9800cf_cgraph">
<area shape="rect" id="node3" href="interfacecamera_view.html#a1599e6698d617f02c46fe5ac78cc438d" title="Adds a &#39;target&#39; overlay to image frame." alt="" coords="741,5,1075,38"/><area shape="rect" id="node5" href="interfacecamera_view.html#a98f6390a43d2e68f9bc68a80a1619754" title="Crop a video frame." alt="" coords="775,61,1041,94"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a98f6390a43d2e68f9bc68a80a1619754"></a><!-- doxytag: member="cameraView::cropImage:" ref="a98f6390a43d2e68f9bc68a80a1619754" args="(CGImageRef img)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (CGImageRef) cropImage: </td>
          <td></td>
          <td class="paramtype">(CGImageRef)&#160;</td>
          <td class="paramname"><em>img</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Crop a video frame. </p>
<p>Crop height to 1/4th of screen height.</p>
<p><b>NOTE</b>: Frame is rotated when received from camera, so this function actually sets the "width" to SCREEN_HEIGHT/4, since the width of the unrotated image will become the height of the rotated one.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">img</td><td>Image to crop (frame from video capture). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Cropped image </dd></dl>

<p>Definition at line <a class="el" href="camera_view_8m_source.html#l00134">134</a> of file <a class="el" href="camera_view_8m_source.html">cameraView.m</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interfacecamera_view_a98f6390a43d2e68f9bc68a80a1619754_icgraph.png" border="0" usemap="#interfacecamera_view_a98f6390a43d2e68f9bc68a80a1619754_icgraph" alt=""/></div>
<map name="interfacecamera_view_a98f6390a43d2e68f9bc68a80a1619754_icgraph" id="interfacecamera_view_a98f6390a43d2e68f9bc68a80a1619754_icgraph">
<area shape="rect" id="node3" href="interfacecamera_view.html#ad02b926ab689e21915abf8cf1a9800cf" title="Delegate to receive, display, and scan incoming video frames." alt="" coords="320,5,1008,38"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae7f3e7153b93817e90d22f0a872a28d1"></a><!-- doxytag: member="cameraView::initCapture" ref="ae7f3e7153b93817e90d22f0a872a28d1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) initCapture </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start video capture for this view. </p>
<p>Connects to video input device, sets local delegate method as video output handler, configures frame queue, autofocus, framerate, etc,</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">\return</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="camera_view_8m_source.html#l00073">73</a> of file <a class="el" href="camera_view_8m_source.html">cameraView.m</a>.</p>

</div>
</div>
<a class="anchor" id="a2c60d41fcd0dc0a17172a1e081a1b47f"></a><!-- doxytag: member="cameraView::initWithFrame:" ref="a2c60d41fcd0dc0a17172a1e081a1b47f" args="(CGRect aRect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithFrame: </td>
          <td></td>
          <td class="paramtype">(CGRect)&#160;</td>
          <td class="paramname"><em>aRect</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize view with a rectangle. </p>
<p>Creates an image with the same size as the given bound rectangle, and sets that image as the only subview of <a class="el" href="interfacecamera_view.html" title="Cropped view of rear camera video stream.">cameraView</a>. The image will be changed to be the most recent frame from the video when the video is running.</p>
<p><b>NOTE</b>: This class has *only* been tested with the input rectangle: <b>(SCREEN_WIDTH, SCREEN_HEIGHT/4)</b></p>
<p>Other sizes may or may not work without code changes. This does work correctly on both iPad and iPhone, though.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">aRect</td><td>Bounding rectangle for this view. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Initialized instance of class </dd></dl>

<p>Definition at line <a class="el" href="camera_view_8m_source.html#l00052">52</a> of file <a class="el" href="camera_view_8m_source.html">cameraView.m</a>.</p>

</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="a6325249b12975d12ea28b956b46fae62"></a><!-- doxytag: member="cameraView::captureSession" ref="a6325249b12975d12ea28b956b46fae62" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (AVCaptureSession *) captureSession<code> [read, write, retain]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Video capture session used to interact with camera. </p>

<p>Definition at line <a class="el" href="camera_view_8h_source.html#l00025">25</a> of file <a class="el" href="camera_view_8h_source.html">cameraView.h</a>.</p>

</div>
</div>
<a class="anchor" id="a636153a51fbba10a8c14fb52b1f184a6"></a><!-- doxytag: member="cameraView::imageView" ref="a636153a51fbba10a8c14fb52b1f184a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (UIImageView *) imageView<code> [read, write, retain]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Image view filled with video frame and displayed in <a class="el" href="interfacecamera_view.html" title="Cropped view of rear camera video stream.">cameraView</a>. </p>

<p>Definition at line <a class="el" href="camera_view_8h_source.html#l00024">24</a> of file <a class="el" href="camera_view_8h_source.html">cameraView.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="camera_view_8h_source.html">cameraView.h</a></li>
<li><a class="el" href="camera_view_8m_source.html">cameraView.m</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="interfacecamera_view.html">cameraView</a>      </li>
      <li class="footer">Generated on Wed Apr 27 2011 18:24:03 for All-Seeing Eye by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
